"use strict";function getTagName(t){var e=(t||"").match(/<\/*([a-z0-9\:\-\_]+)/i);return e?e[1]:null}function closeTag(t){var e=getTagName(t)?"</"+getTagName(t)+">":"";return e}function downzero(t){for(stack=[],tagName="",tagBuffer="",truncatedText="",parseState=0,pointer=0;pointer<t.length;pointer+=1){switch(parseState!==states.unitialized&&(tagBuffer+=t[pointer]),t[pointer]){case"<":parseState===states.unitialized&&t[pointer+1].match(/[a-z0-9\-\_\/\!]/)&&(parseState=states.tag_commenced,tagBuffer+=t[pointer]);break;case"!":parseState===states.tag_commenced&&"<"===t[pointer-1]&&(parseState=states.comment);break;case'"':if(parseState===states.tag_string)parseState=states.tag_commenced;else{if(parseState===states.tag_string_single)break;parseState!==states.unitialized&&(parseState=states.tag_string)}break;case"'":if(parseState===states.tag_string_single)parseState=states.tag_commenced;else{if(parseState===states.tag_string)break;parseState!==states.unitialized&&(parseState=states.tag_string_single)}break;case">":if(parseState===states.tag_commenced){parseState=states.unitialized,truncatedText+=tagBuffer,tagName=getTagName(tagBuffer),tagBuffer.match(/<\s*\//)&&getTagName(stack[stack.length-1])===tagName?stack.pop():voidElements.indexOf(tagName)<0&&!tagBuffer.match(/\/\s*>$/)&&stack.push(tagBuffer),tagBuffer="";continue}if(parseState===states.comment&&"--"===t.substring(pointer-2,pointer)){parseState=states.unitialized,truncatedText+=tagBuffer,tagBuffer="";continue}break;case"-":}if(!parseState)break}for(truncatedText+=tagBuffer;stack.length;)truncatedText+=closeTag(stack.pop());return truncatedText}var stack,tagName,tagBuffer,truncatedText,parseState,pointer,states={unitialized:0,tag_commenced:1,tag_string:-1,tag_string_single:-2,comment:-3},voidElements=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];module.exports=downzero;