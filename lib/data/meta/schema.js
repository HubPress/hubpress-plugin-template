"use strict";function trimSchema(e){var t={};return _.each(e,function(e,r){null!==e&&"undefined"!=typeof e&&(t[r]=e)}),t}function getPostSchema(e,t){var r,a=e.metaDescription?escapeExpression(e.metaDescription):e.excerpt?escapeExpression(e.excerpt):null;return r={"@context":"http://schema.org","@type":"Article",publisher:e.blog.title,author:{"@type":"Person",name:escapeExpression(t.post.author.name),image:e.authorImage,url:e.authorUrl,sameAs:t.post.author.website||null,description:t.post.author.bio?escapeExpression(t.post.author.bio):null},headline:escapeExpression(e.metaTitle),url:e.url,datePublished:e.publishedDate,dateModified:e.modifiedDate,image:e.coverImage,keywords:e.keywords&&e.keywords.length>0?e.keywords.join(", "):null,description:a},r.author=trimSchema(r.author),trimSchema(r)}function getHomeSchema(e){var t={"@context":"http://schema.org","@type":"Website",publisher:escapeExpression(e.blog.title),url:e.url,image:e.coverImage,description:e.metaDescription?escapeExpression(e.metaDescription):null};return trimSchema(t)}function getTagSchema(e,t){var r={"@context":"http://schema.org","@type":"Series",publisher:escapeExpression(e.blog.title),url:e.url,image:e.coverImage,name:t.tag.name,description:e.metaDescription?escapeExpression(e.metaDescription):null};return trimSchema(r)}function getAuthorSchema(e,t){var r={"@context":"http://schema.org","@type":"Person",sameAs:t.author.website||null,publisher:escapeExpression(e.blog.title),name:escapeExpression(t.author.name),url:e.authorUrl,image:e.coverImage,description:e.metaDescription?escapeExpression(e.metaDescription):null};return trimSchema(r)}function getSchema(e,t){if(!config.isPrivacyDisabled("useStructuredData")){var r=t.context?t.context[0]:null;if("post"===r)return getPostSchema(e,t);if("home"===r)return getHomeSchema(e);if("tag"===r)return getTagSchema(e,t);if("author"===r)return getAuthorSchema(e,t)}return null}var config=require("../../config"),handlebars=require("handlebars"),hbs={handlebars:handlebars},escapeExpression=hbs.handlebars.Utils.escapeExpression,_=require("lodash");module.exports=getSchema;