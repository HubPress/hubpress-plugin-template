"use strict";function writeMetaTag(e,t,r){return r=r||"twitter"===e.substring(0,7)?"name":"property","<meta "+r+'="'+e+'" content="'+t+'" />'}function finaliseStructuredData(e){var t=[];return _.each(e.structuredData,function(r,s){"article:tag"===s?(_.each(e.keywords,function(e){""!==e&&(e=escapeExpression(e),t.push(writeMetaTag(s,escapeExpression(e))))}),t.push("")):null!==r&&void 0!==r&&t.push(writeMetaTag(s,escapeExpression(r)))}),t}function ghost_head(e){if(console.error("Check ghost_head options",e),!(this.statusCode>=400)){var t=getMetaData(this,e.data.root),r=[],s=this.context?Array.isArray(this.context)?this.context[0]:this.context:null,a=!config.isPrivacyDisabled("useStructuredData");this.safeVersion;return s&&(r.push('<link rel="canonical" href="'+escapeExpression(t.canonicalUrl)+'" />'),r.push('<meta name="referrer" content="origin" />'),t.previousUrl&&r.push('<link rel="prev" href="'+escapeExpression(t.previousUrl)+'" />'),t.nextUrl&&r.push('<link rel="next" href="'+escapeExpression(t.nextUrl)+'" />'),"paged"!==s&&"page"!==s&&a&&(r.push(""),r.push.apply(r,finaliseStructuredData(t)),r.push(""),r.push('<script type="application/ld+json">\n'+JSON.stringify(t.schema,null,"    ")+"\n    </script>\n"))),r.push('<meta name="generator" content="HubPress" />'),r.push('<link rel="alternate" type="application/rss+xml" title="'+escapeExpression(t.blog.title)+'" href="'+escapeExpression(t.rssUrl)+'" />'),new SafeString(r.join("\n    ").trim())}}var getMetaData=require("../data/meta"),handlebars=require("handlebars"),hbs={handlebars:handlebars},escapeExpression=hbs.handlebars.Utils.escapeExpression,SafeString=hbs.handlebars.SafeString,_=require("lodash"),config=require("../config");module.exports=ghost_head;