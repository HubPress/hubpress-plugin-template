"use strict";var api=require("../api"),schema=require("../data/schema").checks,Promise=require("bluebird"),fetch,prevNext;fetch=function(e,t){return api.posts.read(e).then(function(e){var s=e.posts[0];return s.previous?t.fn(s.previous):s.next?t.fn(s.next):t.inverse(this)})},prevNext=function(e){e=e||{};var t={include:"prev_post"===e.name?"previous,previous.author,previous.tags":"next,next.author,next.tags"};return schema.isPost(this)&&"published"===this.status?(t.slug=this.slug,fetch(t,e)):Promise.resolve(e.inverse(this))},module.exports=prevNext;